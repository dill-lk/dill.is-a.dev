import React, { useEffect, useState, useRef } from 'react';

const CustomCursor: React.FC = () => {
  const cursorRef = useRef<HTMLDivElement>(null);
  const [isMobile, setIsMobile] = useState(false);

  useEffect(() => {
    const checkMobile = () => {
      setIsMobile(window.innerWidth < 768);
    };
    checkMobile();
    window.addEventListener('resize', checkMobile);
    return () => window.removeEventListener('resize', checkMobile);
  }, []);

  useEffect(() => {
    if (isMobile) return;

    const moveCursor = (e: MouseEvent) => {
      if (cursorRef.current) {
        // Direct translate for zero latency
        cursorRef.current.style.transform = `translate3d(${e.clientX}px, ${e.clientY}px, 0)`;
      }
    };

    window.addEventListener('mousemove', moveCursor);
    return () => {
      window.removeEventListener('mousemove', moveCursor);
    };
  }, [isMobile]);

  if (isMobile) return null;

  return (
    <div 
      ref={cursorRef} 
      className="fixed top-0 left-0 pointer-events-none z-[9999] mix-blend-difference"
      style={{ marginTop: 0, marginLeft: 0 }}
    >
      {/* Scaled down to 0.6 for a tighter, precise feel */}
      <svg 
          width="24" 
          height="24" 
          viewBox="0 0 512 512" 
          fill="none" 
          xmlns="http://www.w3.org/2000/svg"
          className="block drop-shadow-lg transform -translate-x-1 -translate-y-1"
      >
          <path 
              d="M0 0 C2.5665738 2.02102188 5.06401617 4.10416576 7.55078125 6.22265625 C8.6051838 7.11492017 9.65988599 8.00683009 10.71484375 8.8984375 C12.38959231 10.31528564 14.06328281 11.73329545 15.73388672 13.1550293 C18.96407308 15.90035528 22.22745055 18.58988778 25.55078125 21.22265625 C30.03010031 24.77120771 34.38418161 28.45202501 38.734375 32.15625 C41.96502437 34.90040158 45.22776179 37.59013434 48.55078125 40.22265625 C53.03010031 43.77120771 57.38418161 47.45202501 61.734375 51.15625 C64.96502437 53.90040158 68.22776179 56.59013434 71.55078125 59.22265625 C75.45220105 62.31339142 79.26169477 65.49644131 83.05078125 68.72265625 C87.54080668 72.54358239 92.08429088 76.27638015 96.703125 79.94140625 C106.29333453 87.62409811 115.73204575 95.49592522 125.08911133 103.46020508 C128.98252685 106.76547286 132.95425766 109.95787782 136.95703125 113.12890625 C140.60479558 116.07348709 144.16532105 119.11717158 147.734375 122.15625 C150.96502437 124.90040158 154.22776179 127.59013434 157.55078125 130.22265625 C162.03010031 133.77120771 166.38418161 137.45202501 170.734375 141.15625 C173.96502437 143.90040158 177.22776179 146.59013434 180.55078125 149.22265625 C185.03010031 152.77120771 189.38418161 156.45202501 193.734375 160.15625 C196.96502437 162.90040158 200.22776179 165.59013434 203.55078125 168.22265625 C208.02801662 171.769557 212.3811504 175.44750426 216.7277832 179.15185547 C220.01717049 181.94776177 223.34699661 184.6750897 226.73828125 187.34765625 C240.3004949 198.20183049 249.69766018 208.83452073 253.55078125 226.22265625 C255.06877558 244.09311364 251.95439869 259.38383908 240.58984375 273.69140625 C231.16270216 283.92458597 217.94362615 290.87819767 203.96575928 291.50228882 C199.34344099 291.62609134 194.72176161 291.64066178 190.09798622 291.63334656 C186.97984917 291.6288203 183.86226545 291.64300543 180.7441864 291.66174316 C174.11722673 291.69833132 167.49032696 291.71219192 160.86328125 291.72265625 C153.19204465 291.73480467 145.52108094 291.75669656 137.84996605 291.80265808 C134.80589414 291.81605706 131.76218278 291.81208851 128.71809387 291.80725098 C106.38731682 291.86958016 87.39725994 295.28630652 70.51171875 311.13671875 C64.51466838 317.54207893 59.54777543 324.91729706 54.38671875 331.99609375 C50.54902938 337.24756505 46.62540719 342.4300478 42.67578125 347.59765625 C42.01521729 348.46197266 41.35465332 349.32628906 40.67407227 350.21679688 C39.32392108 351.98236663 37.97341389 353.74766421 36.62255859 355.51269531 C34.48677444 358.30637951 32.35592051 361.10375894 30.2265625 363.90234375 C29.51677246 364.8351416 28.80698242 365.76793945 28.07568359 366.72900391 C26.73075756 368.49675581 25.38601663 370.26464857 24.04150391 372.03271484 C22.21471065 374.43202101 20.3839226 376.82819746 18.55078125 379.22265625 C17.92582764 380.0410498 17.30087402 380.85944336 16.65698242 381.70263672 C16.04701416 382.49557129 15.4370459 383.28850586 14.80859375 384.10546875 C14.26734863 384.81074707 13.72610352 385.51602539 13.16845703 386.24267578 C5.45068767 395.68896457 -6.43819176 402.19910357 -18.44921875 404.22265625 C-34.97094211 405.85500115 -50.14907451 403.84703183 -63.44921875 393.22265625 C-64.13371094 392.71089844 -64.81820312 392.19914062 -65.5234375 391.671875 C-76.48810514 382.92102597 -82.26184363 369.77449338 -84.44921875 356.22265625 C-84.78163576 353.14150267 -84.95135879 350.06684255 -85.08714294 346.97137451 C-85.13165417 346.09594317 -85.1761654 345.22051182 -85.22202545 344.31855226 C-85.36795279 341.41286671 -85.50320078 338.50678756 -85.63842773 335.60058594 C-85.74158289 333.5026588 -85.84540137 331.4047642 -85.9498291 329.30690002 C-86.23144033 323.61167538 -86.50376135 317.91604004 -86.77443194 312.22028637 C-87.06255346 306.19120953 -87.35928396 300.16255615 -87.65504456 294.1338501 C-88.2170218 282.6521022 -88.77130774 271.16999633 -89.3228398 259.68774247 C-89.93897125 246.8680795 -90.56349322 234.04883023 -91.18884528 221.22961426 C-92.25626723 199.34539832 -93.31583471 177.46081333 -94.3695904 155.57593536 C-95.01756809 142.12119959 -95.67048126 128.66673458 -96.33594763 115.212852 C-96.44765805 112.95264606 -96.55903009 110.69242375 -96.6702528 108.43219376 C-96.70529826 107.72002252 -96.74034372 107.00785129 -96.77645117 106.27409911 C-96.84460804 104.88877558 -96.91274925 103.50345129 -96.98087353 102.11812615 C-97.13681872 98.95025809 -97.29397209 95.7824572 -97.45292473 92.61473846 C-100.70414141 27.82210415 -100.70414141 27.82210415 -83.63671875 7.41015625 C-61.65146054 -16.01536936 -25.74715993 -18.68414317 0 0 Z M-57.44921875 28.22265625 C-63.99826659 35.12278707 -66.44904785 42.37459954 -66.44928384 51.83077908 C-66.34876671 54.89321997 -66.20442297 57.95068939 -66.04470825 61.01062012 C-65.98909851 62.18222954 -65.93348877 63.35383897 -65.87619388 64.56095171 C-65.72125351 67.79591225 -65.56013113 71.03049517 -65.39634156 74.26501751 C-65.2208614 77.760541 -65.05342219 81.25645096 -64.88497925 84.75231934 C-64.55396588 91.59625035 -64.21563232 98.43980078 -63.87490095 105.28325409 C-63.47781632 113.26502764 -63.0884188 121.24717068 -62.69942676 129.22934204 C-62.00451029 143.48454823 -61.30325001 157.73943507 -60.59814453 171.99414062 C-59.91531898 185.79864397 -59.23598153 199.60331223 -58.56103516 213.40820312 C-58.5195199 214.25730961 -58.47800464 215.1064161 -58.43523134 215.98125309 C-58.26832219 219.39523675 -58.10142713 222.8092211 -57.93455327 226.22320649 C-57.21208579 241.00236981 -56.48709937 255.78140977 -55.76143569 270.56041646 C-55.68342513 272.14925559 -55.60542592 273.73809528 -55.52743798 275.32693553 C-55.0433101 285.18992481 -54.55790907 295.05284983 -54.07024002 304.91566467 C-53.93474145 307.6567258 -53.79971303 310.39780939 -53.66513824 313.13891602 C-53.27053717 321.16740169 -52.86703515 329.19534493 -52.44921875 337.22265625 C-52.40428331 338.10312433 -52.35934787 338.98359241 -52.31305075 339.89074135 C-52.19558542 342.1567458 -52.07097823 344.42219974 -51.94284058 346.68762207 C-51.87801924 347.86443794 -51.8131979 349.04125381 -51.74641228 350.25373077 C-51.11942106 356.51729313 -49.01663443 361.77543572 -44.44921875 366.22265625 C-38.41577582 370.96041404 -32.99600982 371.90011199 -25.40625 371.58203125 C-19.21560648 370.8296677 -14.21213995 367.45296897 -10.17919922 362.73779297 C-8.79977292 360.94185672 -7.46310449 359.1206206 -6.13671875 357.28515625 C-5.07654815 355.84429563 -4.01529338 354.40423229 -2.953125 352.96484375 C-2.38867676 352.1975293 -1.82422852 351.43021484 -1.24267578 350.63964844 C1.93264416 346.36035802 5.18490066 342.13986595 8.42578125 337.91015625 C13.57980601 331.1687237 18.66400196 324.38291288 23.67578125 317.53515625 C42.74808169 291.55067404 62.10547622 267.51157943 95.55078125 261.22265625 C107.42879567 259.40353747 119.13776235 258.9395482 131.14169502 258.94826126 C134.13202387 258.94924417 137.12201028 258.93608564 140.11228943 258.91928101 C148.59965568 258.87349598 157.08697682 258.84837296 165.57446289 258.84179688 C170.80079945 258.83677566 176.02676339 258.81251868 181.25297356 258.77647018 C183.23080138 258.76670983 185.2086806 258.76431955 187.18652534 258.76964188 C189.94710364 258.77673443 192.706568 258.75939315 195.46704102 258.73681641 C196.67423798 258.74907509 196.67423798 258.74907509 197.90582275 258.76158142 C204.42305866 258.66712623 209.60938098 256.76089162 214.57421875 252.4765625 C215.02023437 251.91839844 215.46625 251.36023438 215.92578125 250.78515625 C216.38726562 250.22957031 216.84875 249.67398438 217.32421875 249.1015625 C221.22272593 243.12964545 221.23779427 237.14702437 220.55078125 230.22265625 C218.05039971 219.97109192 207.06259019 213.54357947 199.25 207.38671875 C196.13373301 204.8882934 193.09048042 202.31319329 190.05078125 199.72265625 C186.26196257 196.49614157 182.45218553 193.31337912 178.55078125 190.22265625 C174.07146219 186.67410479 169.71738089 182.99328749 165.3671875 179.2890625 C162.13653813 176.54491092 158.87380071 173.85517816 155.55078125 171.22265625 C151.07146219 167.67410479 146.71738089 163.99328749 142.3671875 160.2890625 C139.13653813 157.54491092 135.87380071 154.85517816 132.55078125 152.22265625 C128.64936145 149.13192108 124.83986773 145.94887119 121.05078125 142.72265625 C116.56075582 138.90173011 112.01727162 135.16893235 107.3984375 131.50390625 C97.80822797 123.82121439 88.36951675 115.94938728 79.01245117 107.98510742 C75.11903565 104.67983964 71.14730484 101.48743468 67.14453125 98.31640625 C63.49676692 95.37182541 59.93624145 92.32814092 56.3671875 89.2890625 C53.13653813 86.54491092 49.87380071 83.85517816 46.55078125 81.22265625 C42.64936145 78.13192108 38.83986773 74.94887119 35.05078125 71.72265625 C30.56075582 67.90173011 26.01727162 64.16893235 21.3984375 60.50390625 C17.65291974 57.50338174 13.94383792 54.45982245 10.23828125 51.41015625 C9.50359619 50.80558594 8.76891113 50.20101562 8.01196289 49.578125 C4.09121658 46.34352011 0.19679206 43.08213164 -3.66430664 39.77661133 C-20.42674526 25.43771954 -36.83088807 12.29508332 -57.44921875 28.22265625 Z " 
              fill="#ffffff" 
              transform="translate(210.44921875,59.77734375) scale(1)"
          />
      </svg>
    </div>
  );
};

export default CustomCursor;